{"version":3,"sources":["scenes/order/query/index.tsx","scenes/order/query/useOrderQuery.tsx","constants/db_constants.ts","common/network.ts","constants/api_constants.js","constants/error.js","components/view/button_tab.tsx","components/view/date_range.tsx","hooks/useInputHook.js","components/view/table.tsx"],"names":["Panel","Collapse","columnTemps","title","dataIndex","className","data","i","push","key","name","age","address","OrderQuery","useHistory","searchInput","useInputHook","useState","statusCounts","setStatusCounts","selectedDefault","OrderStatus","TOTAL","statusSelected","setStatusSelected","orders","setOrders","start","end","rangeSelected","setRangeSeleted","fetchData","startDate","endDate","status","search","a","hide","message","loading","Promise","all","getStatusCount","getOrders","variables","parameter","language","Request","APIConstants","result","res","error","reverse","loginFailed","current","ids","page","pageSize","size","statusType","type","useEffect","onChangeDate","dates","dateStrings","value","refetchOrder","useOrderQuery","defaultActiveKey","onChange","console","log","expandIconPosition","header","prefix","SearchOutlined","placeholder","style","width","marginRight","marginBottom","event","target","replace","icon","borderRadius","onClick","margin","display","flexWrap","map","item","statusName","OrderStatusDisplay","sumNumber","isSelected","height","columns","datas","CANCEL_ORDER","PENDING","GOT","DELIVERING","SIGN","Return_Registration","Return_Confirmation","RETURNED_SIGN","ABNORMAL_PARCEL","token","getLocalToken","url","params","method","needEncodeUrl","headers","Accept","Authorization","opts","mode","toLowerCase","body","JSON","stringify","keys","Object","length","query","encodeURIComponent","join","didTimeOut","resolve","reject","timeout","setTimeout","Error","fetch","then","response","clearTimeout","contentType","get","indexOf","json","resetLocalToken","window","location","statusText","code","desc","catch","err","authApi","Headers","accept","host","process","login","exportOrders","ButtonTab","color","borderBottom","cursor","fontSize","paddingBottom","RangePicker","DatePicker","DateRange","setDates","bordered","defaultValue","moment","disabledDate","tooLate","diff","onCalendarChange","ranges","subtract","startOf","initialValue","callback","setValue","useCallback","directValue","undefined","inputValue","checked","parseInt","Date","currentTarget","getMonth","CtTable","dataSource","scroll","x","pagination","showTotal","total","range","defaultPageSize","pageSizeOptions","showSizeChanger"],"mappings":"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","file":"static/js/7.37bcbad4.chunk.js","sourcesContent":["import React from \"react\";\nimport \"assets/css/order.css\";\nimport { SearchOutlined } from \"@ant-design/icons\";\nimport { Collapse, Input, Button } from \"antd\";\nimport ButtonTab from \"../../../components/view/button_tab\";\nimport DateRange from \"../../../components/view/date_range\";\nimport { OrderStatusDisplay } from \"constants/db_constants\";\nimport useOrderQuery from \"./useOrderQuery\";\nimport CtTable from \"../../../components/view/table\";\nconst { Panel } = Collapse;\nconst columnTemps = [\n  {\n    title: \"Trạng thái\",\n    dataIndex: \"status\",\n    className: \"order_query_tbl_header\",\n  },\n  {\n    title: \"Mã đơn KH\",\n    dataIndex: \"age\",\n    className: \"order_query_tbl_header\",\n  },\n  {\n    title: \"Mã đơn đặt\",\n    dataIndex: \"address\",\n    className: \"order_query_tbl_header\",\n  },\n  {\n    title: \"Mã vận đơn\",\n    dataIndex: \"address\",\n    className: \"order_query_tbl_header\",\n  },\n  {\n    title: \"Người nhận\",\n    dataIndex: \"address\",\n    className: \"order_query_tbl_header\",\n  },\n  {\n    title: \"Điện thoại\",\n    dataIndex: \"address\",\n    className: \"order_query_tbl_header\",\n  },\n  {\n    title: \"Tên hàng hóa\",\n    dataIndex: \"address\",\n    className: \"order_query_tbl_header\",\n  },\n  {\n    title: \"Phương thức ký nhận\",\n    dataIndex: \"address\",\n    className: \"order_query_tbl_header\",\n  },\n  {\n    title: \"Trọng lượng\",\n    dataIndex: \"address\",\n    className: \"order_query_tbl_header\",\n  },\n  {\n    title: \"Vận phí\",\n    dataIndex: \"address\",\n    className: \"order_query_tbl_header\",\n  },\n  {\n    title: \"Tiền COD\",\n    dataIndex: \"address\",\n    className: \"order_query_tbl_header\",\n  },\n  {\n    title: \"Phí khác\",\n    dataIndex: \"address\",\n    className: \"order_query_tbl_header\",\n  },\n  {\n    title: \"Loại thanh toán\",\n    dataIndex: \"address\",\n    className: \"order_query_tbl_header\",\n  },\n  {\n    title: \"Địa chỉ\",\n    dataIndex: \"address\",\n    className: \"order_query_tbl_header\",\n  },\n  {\n    title: \"Thời gian\",\n    dataIndex: \"address\",\n    className: \"order_query_tbl_header\",\n  },\n  {\n    title: \"Ghi chú\",\n    dataIndex: \"address\",\n    className: \"order_query_tbl_header\",\n  },\n  {\n    title: \"Dịch vụ\",\n    dataIndex: \"address\",\n    className: \"order_query_tbl_header\",\n  },\n  {\n    title: \"Loại hàng\",\n    dataIndex: \"address\",\n    className: \"order_query_tbl_header\",\n  },\n];\n\nconst data: any[] = [];\nfor (let i = 0; i < 46; i++) {\n  data.push({\n    key: i,\n    name: `Edward King ${i}`,\n    age: 32,\n    address: `London, Park Lane no. ${i}`,\n  });\n}\n\nexport default function OrderQuery() {\n  const {\n    statusCounts,\n    searchInput,\n    onChangeDate,\n    search,\n    refetchOrder,\n    statusSelected,\n  } = useOrderQuery();\n\n  function callback(key: any) {\n    console.log(key);\n  }\n  function onChangeSearch(event: any) {\n    let value = event.target.value as string;\n    if (value === \" \") {\n    }\n    value = value.replace(\" \", \",\");\n    searchInput.onChange(value);\n  }\n  return (\n    <div>\n      <Collapse\n        defaultActiveKey={[\"1\"]}\n        onChange={callback}\n        expandIconPosition=\"right\"\n      >\n        <Panel header=\"Điều kiện truy vấn\" key=\"1\">\n          <div>\n            <Input\n              prefix={<SearchOutlined />}\n              placeholder=\"Nhập số theo dõi, số điện thoại hoặc mã khách hàng\"\n              style={{\n                width: \"360px\",\n                marginRight: \"16px\",\n                marginBottom: \"12px\",\n              }}\n              onChange={onChangeSearch}\n              value={searchInput.value ?? \"\"}\n            />\n            <DateRange onChange={onChangeDate} />\n            <Button\n              type=\"primary\"\n              icon={<SearchOutlined />}\n              style={{\n                borderRadius: \"3px\",\n              }}\n              onClick={search}\n            >\n              Tra cứu\n            </Button>\n          </div>\n          <div\n            style={{\n              margin: \"12px 0px\",\n              display: \"flex\",\n              flexWrap: \"wrap\",\n            }}\n          >\n            {statusCounts.map((item) => (\n              <ButtonTab\n                key={\"button_tab_\" + item.statusName}\n                title={`${OrderStatusDisplay[item.statusName]} (${\n                  item.sumNumber\n                })`}\n                isSelected={statusSelected === item.statusName}\n                onClick={() => {\n                  refetchOrder(item.statusName);\n                }}\n              />\n            ))}\n          </div>\n        </Panel>\n      </Collapse>\n      <div\n        style={{\n          height: \"50px\",\n        }}\n      ></div>\n      <CtTable columns={columnTemps} datas={[]} />\n    </div>\n  );\n}\n","import { useEffect, useState } from \"react\";\nimport Request, { ApiResponse } from \"common/network\";\nimport APIConstants from \"constants/api_constants\";\nimport { loginFailed } from \"constants/error\";\nimport { message } from \"antd\";\nimport { Order, OrderStatusCount, Pagination } from \"constants/types\";\nimport { useHistory } from \"react-router-dom\";\nimport { OrderStatus } from \"constants/db_constants\";\nimport useInputHook from \"hooks/useInputHook\";\n\nexport default function useOrderQuery() {\n  const defaultCount: OrderStatusCount[] = [];\n  const defaultPagination: Pagination<Order> = {};\n\n  const history = useHistory();\n  const searchInput = useInputHook();\n  // state\n  const [statusCounts, setStatusCounts] = useState(defaultCount);\n  const selectedDefault: string = OrderStatus.TOTAL;\n  const [statusSelected, setStatusSelected] = useState(selectedDefault);\n  const [orders, setOrders] = useState(defaultPagination);\n  const [rangeSelected, setRangeSeleted] = useState({\n    start: \"\",\n    end: \"\",\n  });\n\n  function onChangeDate(dates: any[], dateStrings: string[]) {\n    // console.log(\"From: \", dates[0], \", to: \", dates[1]);\n    // console.log(\"From: \", dateStrings[0], \", to: \", dateStrings[1]);\n    setRangeSeleted({ start: dateStrings[0], end: dateStrings[1] });\n  }\n  function search() {\n    // console.log(\"searchInput: \", searchInput.value);\n    fetchData(\n      rangeSelected.start,\n      rangeSelected.end,\n      statusSelected,\n      searchInput.value\n    );\n  }\n  function refetchOrder(status: string) {\n    setStatusSelected(status);\n    getOrders(\n      rangeSelected.start,\n      rangeSelected.end,\n      status,\n      searchInput.value\n    );\n  }\n\n  // fetch\n  useEffect(() => {\n    fetchData(\"\", \"\");\n  }, []);\n\n  async function fetchData(\n    startDate: string,\n    endDate: string,\n    status?: string,\n    search?: string\n  ) {\n    const hide = message.loading(\"Action in progress..\", 0);\n    try {\n      await Promise.all([\n        getStatusCount(startDate, endDate),\n        getOrders(startDate, endDate, status, search),\n      ]);\n    } catch (_) {}\n    hide();\n  }\n  async function getStatusCount(startDate: string, endDate: string) {\n    try {\n      let variables = {\n        parameter: {\n          language: \"vi\",\n          startDate: startDate,\n          endDate: endDate,\n        },\n      };\n      let result = await Request(APIConstants.getStatusCount, variables);\n\n      let res = result as ApiResponse<OrderStatusCount[]>;\n      if (!res) {\n        message.error(\"Can't parse response\");\n        return;\n      }\n      if (res.data) {\n        setStatusCounts(res.data.reverse());\n      }\n    } catch (error) {\n      message.error(loginFailed);\n    }\n  }\n  async function getOrders(\n    startDate: string,\n    endDate: string,\n    status?: string,\n    search?: string\n  ) {\n    try {\n      let variables = {\n        parameter: {\n          language: \"vi\",\n          current: 1,\n          endDate: endDate,\n          ids: search,\n          page: 1,\n          pageSize: 20,\n          size: 20,\n          startDate: startDate,\n          statusType: status ?? \"-1\",\n          type: 1,\n        },\n      };\n      let result = await Request(APIConstants.getOrders, variables);\n      let res = result as ApiResponse<Pagination<Order>>;\n      if (!res) {\n        message.error(\"Can't parse response\");\n        return;\n      }\n      if (res.data) {\n        setOrders(res.data);\n      }\n    } catch (error) {\n      message.error(loginFailed);\n    }\n  }\n\n  return {\n    statusCounts,\n    orders,\n    searchInput,\n    onChangeDate,\n    search,\n    refetchOrder,\n    statusSelected,\n  };\n}\n","export enum OrderStatus {\n  TOTAL = \"TOTAL\",\n  CANCEL_ORDER = \"CANCEL_ORDER\",\n  PENDING = \"PENDING\",\n  GOT = \"GOT\",\n  DELIVERING = \"DELIVERING\",\n  SIGN = \"SIGN\", // ky nhan\n  Return_Registration = \"Return_Registration\", // dang ky chuyen hoan\n  Return_Confirmation = \"Return_Confirmation\", // xac nhan chuyen hoan\n  RETURNED_SIGN = \"RETURNED_SIGN\", // chuyen hoan thanh cong\n  ABNORMAL_PARCEL = \"ABNORMAL_PARCEL\", // kien co van de\n}\n\nexport const OrderStatusDisplay: { [key: string]: string } = {\n  TOTAL: \"Tổng đơn hàng\",\n  CANCEL_ORDER: \"Hủy\",\n  PENDING: \"Đợi nhận kiện\", // doi nhan\n  GOT: \"Đã nhận kiện\", // da nhan kien\n  DELIVERING: \"Đang phát kiện\",\n  SIGN: \"Ký nhận\",\n  Return_Registration: \"Đăng ký chuyển hoàn\",\n  Return_Confirmation: \"Xác nhận chuyển hoàn\",\n  RETURNED_SIGN: \"Chuyển hoàn thành công\",\n  ABNORMAL_PARCEL: \"Kiện vấn đề\",\n};\n\n// export const FileType = Object.freeze({\n//   file: \"file\",\n//   banner: \"banner\",\n// });\n","import { resetLocalToken, getLocalToken } from \"./local_storage\";\n\nexport type ApiResponse<T> = {\n  success: boolean;\n  code: number;\n  desc?: string;\n  data?: T;\n  token?: string;\n};\n\nlet token = getLocalToken() ?? \"\";\nconst FETCH_TIMEOUT = 15000;\n\nexport default function Request(\n  url: string,\n  params: any,\n  method = \"POST\",\n  needEncodeUrl = true\n) {\n  if (!token) {\n    token = getLocalToken() ?? \"\";\n  }\n  const headers = {\n    Accept: \"application/json\",\n    \"Content-Type\": \"application/json\",\n    Authorization: token || \"\",\n    // credentials: 'same-origin',\n  };\n  let opts: RequestInit = {\n    mode: \"cors\",\n    method,\n    headers,\n  };\n  if (!params) {\n    params = {\n      token,\n    };\n  } else if (!params.token) {\n    params.token = token;\n  }\n  if (method.toLowerCase() !== \"get\") {\n    opts.body = typeof params === \"object\" ? JSON.stringify(params) : params;\n  } else if (params) {\n    let keys = Object.keys(params);\n    if (keys.length > 0) {\n      let query = keys.map((key) => {\n        if (needEncodeUrl)\n          return `${encodeURIComponent(key)}=${encodeURIComponent(\n            params[key]\n          )}`;\n        else return `${key}=${params[key]}`;\n      });\n      url += `?${query.join(\"&\")}`;\n    }\n  }\n  let didTimeOut = false;\n\n  return new Promise(function (resolve, reject) {\n    const timeout = setTimeout(function () {\n      didTimeOut = true;\n      return reject(new Error(\"Request timed out\"));\n    }, FETCH_TIMEOUT);\n\n    fetch(url, opts)\n      .then(async (response) => {\n        try {\n          clearTimeout(timeout);\n          if (!didTimeOut) {\n            if (typeof response === \"object\") {\n              if (response.status < 200 || response.status >= 300) {\n                const contentType = response.headers.get(\"content-type\") ?? \"\";\n                const res =\n                  contentType.indexOf(\"json\") >= 0 && (await response.json());\n                if (response.status === 401) {\n                  resetLocalToken();\n                }\n                if (response.status === 503) {\n                  // @ts-ignore\n                  window.location = \"/503\";\n                }\n                if (response.status >= 500) {\n                  return Promise.reject(\n                    \"System Error. Please try again later.\"\n                  );\n                }\n                if (res) {\n                  return Promise.reject(\n                    typeof res === \"object\" ? JSON.stringify(res) : res\n                  );\n                }\n                return Promise.reject(response.statusText);\n              }\n              if (response.status === 204) {\n                return response;\n              }\n              return response.json();\n            } else {\n              return Promise.reject(\"Request failed\");\n            }\n          }\n        } catch (err) {\n          return Promise.reject(err);\n        }\n      })\n      .then((data) => {\n        // console.log(data);\n        if (data.code) {\n          if (data.code === 401) {\n            resetLocalToken();\n          }\n          if (data.code < 200 && data.code >= 300) {\n            return reject(data.desc ?? data.message ?? \"Request failed\");\n          }\n        }\n        return resolve(data);\n      })\n      .catch((err) => {\n        if (didTimeOut) return;\n        return reject(err);\n      });\n  });\n}\n\nexport function authApi(url: string, params: any, method = \"POST\") {\n  let didTimeOut = false;\n\n  return new Promise(function (resolve, reject) {\n    const timeout = setTimeout(function () {\n      didTimeOut = true;\n      return reject(new Error(\"Request timed out\"));\n    }, FETCH_TIMEOUT);\n\n    fetch(url, {\n      mode: \"cors\", // 'cors - no-cors'\n      method,\n      body: typeof params === \"object\" ? JSON.stringify(params) : params,\n      headers: new Headers({\n        accept: \"application/json\",\n        \"content-type\": \"application/json\",\n      }),\n    })\n      .then(async (response) => {\n        clearTimeout(timeout);\n        if (didTimeOut) {\n          return;\n        }\n        if (response == null) {\n          return;\n        }\n        if (response.status < 200 || response.status >= 300) {\n          const contentType = response.headers.get(\"content-type\") ?? \"\";\n          if (contentType.indexOf(\"json\") >= 0) {\n            const res = await response.json();\n            throw new Error(\n              typeof res === \"object\" ? JSON.stringify(res) : res\n            );\n          } else {\n            throw new Error(response.statusText);\n          }\n        } else return response.json();\n      })\n      .then((data) => {\n        if (data.code === 401) {\n          resetLocalToken();\n        }\n        // fix token is old token at base api\n        if (data.token) {\n          token = getLocalToken() ?? \"\";\n        }\n        return resolve(data);\n      })\n      .catch((err) => {\n        if (didTimeOut) return;\n        return reject(err);\n      });\n  });\n}\n\n// for call api with attack file\nexport function uploadFormData(\n  url: string,\n  formData: FormData,\n  method = \"POST\",\n  onProgress: Function\n) {\n  if (token) {\n    if (onProgress) {\n      return uploadApiWithProgress(url, formData, undefined, onProgress);\n    } else return uploadNormal(url, formData, method);\n  } else return Promise.reject(\"Not exists token\");\n}\n\nexport function uploadApi(\n  url: string,\n  fileObject: any,\n  fileName: string,\n  method = \"POST\",\n  params: any,\n  onProgress: Function\n) {\n  if (token) {\n    const data = new FormData();\n    if (fileObject instanceof Array) {\n      fileObject.forEach((file) => {\n        data.append(fileName, file);\n      });\n    } else if (fileObject) {\n      data.append(fileName, fileObject);\n    }\n    Object.keys(params).map(function (key) {\n      data.append(key, params[key]);\n    });\n    if (onProgress) {\n      return uploadApiWithProgress(url, data, undefined, onProgress);\n    } else return uploadNormal(url, data, method);\n  } else return Promise.reject(\"Not exists token\");\n}\n// base upload func\nfunction uploadNormal(url: string, data: FormData, method = \"POST\") {\n  if (!token) {\n    token = getLocalToken() ?? \"\";\n  }\n  let didTimeOut = false;\n\n  return new Promise(function (resolve, reject) {\n    const timeout = setTimeout(function () {\n      didTimeOut = true;\n      return reject(new Error(\"Request timed out\"));\n    }, FETCH_TIMEOUT);\n\n    fetch(url, {\n      mode: \"cors\",\n      method,\n      headers: {\n        // 'Accept': 'application/json',\n        // 'content-type': 'application/x-www-form-urlencoded',\n        Authorization: token,\n        // credentials: 'same-origin',\n      },\n      body: data,\n    })\n      .then(async (response) => {\n        clearTimeout(timeout);\n        if (!didTimeOut) {\n          if (response.status < 200 || response.status >= 300) {\n            let contentType = response.headers.get(\"content-type\") ?? \"\";\n            if (contentType.indexOf(\"json\") >= 0) {\n              const res = await response.json();\n              throw new Error(JSON.stringify(res));\n            } else {\n              throw new Error(response.statusText);\n            }\n          } else return response.json();\n        }\n      })\n      .then((data) => {\n        return resolve(data);\n      })\n      .catch((err) => {\n        if (didTimeOut) return;\n        return reject(err);\n      });\n  });\n}\n\nfunction uploadApiWithProgress(\n  url: string,\n  data: FormData,\n  method = \"POST\",\n  onProgress: Function\n) {\n  if (data instanceof FormData) {\n    return new Promise((res, rej) => {\n      var xhr = new XMLHttpRequest();\n      xhr.open(\"post\", url);\n      xhr.setRequestHeader(\"x-api-key\", token);\n      xhr.setRequestHeader(\"mode\", \"cors\");\n      xhr.onload = (e) => res(e.target);\n      xhr.onerror = rej;\n      if (xhr.upload && onProgress) {\n        // @ts-ignore\n        xhr.upload.onprogress = onProgress; // event.loaded / event.total * 100 ; //event.lengthComputable\n      }\n      xhr.send(data);\n    });\n  } else return Promise.reject(\"Data not form data\");\n}\n","let host = process.env.REACT_APP_API_URL;\nexport const homePage = process.env.REACT_APP_PAGE_URL;\n\nexport default {\n  host,\n  login: host + \"/login.do\",\n  getOrders: host + \"/getOrders.do\",\n  getStatusCount: host + \"/getStatusCountData.do\",\n  exportOrders: \"/customExportOrders.do\",\n};\n","export const loginFailed = \"Username or password is incorrect!\";","import React from \"react\";\n\nexport default function ButtonTab({\n  title,\n  isSelected,\n  onClick,\n}: {\n  title: string;\n  isSelected?: boolean;\n  onClick?: (e: any) => void;\n}) {\n  return (\n    <span\n      style={{\n        color: isSelected === true ? \"#f56c6c\" : \"#909399\",\n        borderBottom: isSelected\n          ? \"2px solid #f56c6c\"\n          : \"2px solid transparent\",\n        cursor: \"pointer\",\n        marginRight: \"18px\",\n        marginBottom: \"8px\",\n        fontSize: \"14px\",\n        paddingBottom: \"2px\",\n        width: \"auto\",\n      }}\n      onClick={onClick}\n    >\n      {title}\n    </span>\n  );\n}\n","import React, { useState } from \"react\";\nimport moment from \"moment\";\nimport { DatePicker } from \"antd\";\nconst { RangePicker } = DatePicker;\n\nexport default function DateRange({\n  onChange,\n}: {\n  onChange?: (dates: any, dateStrings: string[]) => void;\n}) {\n  const datesDefault: moment.Moment[] = [];\n  const [dates, setDates] = useState(datesDefault);\n\n  const disabledDate = (current: moment.Moment) => {\n    if (!dates || dates.length === 0) {\n      return false;\n    }\n    const tooLate = dates[0] && current.diff(dates[0], \"days\") > 30;\n    const tooEarly = dates[1] && dates[1].diff(current, \"days\") > 30;\n    return tooEarly || tooLate;\n  };\n\n  return (\n    <RangePicker\n      bordered\n      defaultValue={[moment(), moment()]}\n      disabledDate={disabledDate}\n      onChange={onChange}\n      onCalendarChange={(value: any) => {\n        setDates(value);\n      }}\n      style={{\n        marginRight: \"16px\",\n        marginBottom: \"12px\",\n      }}\n      ranges={{\n        \"Hôm nay\": [moment(), moment()],\n        \"Trong ba ngày\": [moment().subtract(3, \"day\"), moment()],\n        \"Tuần này\": [moment().startOf(\"week\"), moment()],\n        \"Tháng này\": [moment().startOf(\"month\"), moment()],\n        \"Trong ba tháng\": [moment().subtract(3, \"month\"), moment()],\n      }}\n      // dateRender={(current) => {\n      //   console.log(\"current: \", current.date());\n      //   const style: any = {};\n      //   // if (current.date() === 1) {\n      //   //   style.border = \"1px solid #1890ff\";\n      //   //   style.borderRadius = \"50%\";\n      //   // }\n      //   style.border = \"1px solid #1890ff\";\n      //   style.borderRadius = \"50%\";\n      //   return (\n      //     <div className=\"ant-picker-cell-inner\" style={style}>\n      //       {current.date()}\n      //     </div>\n      //   );\n      // }}\n      // panelRender={(current) => {\n      //   return (\n      //     <div>\n      //       ToDay, This month\n      //       {current}\n      //     </div>\n      //   );\n      // }}\n    />\n  );\n}\n","import { useState, useCallback } from \"react\";\n// hook must start with use\nconst useInputHook = (initialValue, callback) => {\n  const [value, setValue] = useState(initialValue);\n  const onChange = useCallback(\n    function (event, directValue) {\n      if (\n        event &&\n        event.target &&\n        event.target.value !== null &&\n        event.target.value !== undefined\n      ) {\n        // event.targe.value maybe empty (''). van can set gia tri empty\n        // window.kkLog('event.target.value:  ', event.target.value);\n        // window.kkLog('event.target.name:  ', event.target.name);\n        // window.kkLog('event.target.type:  ', event.target.type);\n\n        const name = event.target.name;\n        const type = event.target.type;\n        let inputValue =\n          type === \"checkbox\" ? event.target.checked : event.target.value || \"\";\n        if (type === \"number\") {\n          inputValue = parseInt(inputValue);\n        } else if (\n          typeof inputValue === \"string\" &&\n          (inputValue.toLowerCase() === \"true\" ||\n            inputValue.toLowerCase() === \"false\")\n        ) {\n          inputValue = inputValue.toLowerCase() === \"true\";\n        } else if (type === \"date\") {\n          inputValue = new Date(inputValue);\n        }\n        // console.log('inputValue: ', inputValue)\n        if (name) {\n          if (typeof callback === \"function\") {\n            callback({ [name]: inputValue });\n          } else {\n            setValue({ ...value, [name]: inputValue });\n          }\n        } else {\n          setValue(inputValue);\n        }\n      } else if (event && event.currentTarget && event.currentTarget.value) {\n        // console.log('event.currentTarget.value: ', event.currentTarget.value);\n        const name = event.currentTarget.name;\n        const type = event.currentTarget.type;\n        let inputValue =\n          type === \"checkbox\"\n            ? event.currentTarget.checked\n            : event.currentTarget.value || \"\";\n\n        if (type === \"number\") {\n          inputValue = parseInt(value);\n        } else if (\n          typeof inputValue === \"string\" &&\n          (inputValue.toLowerCase() === \"true\" ||\n            inputValue.toLowerCase() === \"false\")\n        ) {\n          inputValue = inputValue.toLowerCase() === \"true\";\n        }\n        if (name) {\n          if (typeof callback === \"function\") {\n            callback({ [name]: inputValue });\n          } else {\n            setValue({ ...value, [name]: inputValue });\n          }\n        } else {\n          setValue(inputValue);\n        }\n      } else if (\n        event !== undefined &&\n        event !== null &&\n        (event instanceof Date ||\n          typeof event.getMonth === \"function\" ||\n          typeof event !== \"object\")\n      ) {\n        // window.kkLog('event :', event);\n        // console.log('event is number: ', event);\n        setValue(event);\n      } else if (\n        directValue !== undefined &&\n        directValue !== null &&\n        (directValue instanceof Date ||\n          typeof directValue.getMonth === \"function\" ||\n          typeof directValue !== \"object\")\n      ) {\n        // window.kkLog('directValue :', directValue);\n        setValue(directValue);\n      } else {\n        // console.log('set value')\n        setValue(\"\");\n      }\n    },\n    [value, callback]\n  );\n  return {\n    value,\n    onChange,\n  };\n};\n\nexport default useInputHook;\n","import React from \"react\";\nimport { DatePicker, Space, Collapse, Input, Button, Table } from \"antd\";\nimport { ColumnsType } from \"antd/es/table\";\n\nexport default function CtTable({\n  columns,\n  datas,\n  onChange,\n}: {\n  columns: ColumnsType;\n  datas: any[];\n  onChange?: any;\n}) {\n  return (\n    <Table\n      columns={columns}\n      dataSource={datas}\n      size=\"middle\"\n      scroll={{ x: \"max-content\" }}\n      pagination={{\n        showTotal: (total, range) => {\n          return <span style={{ fontSize: \"13px\" }}>Tổng {total}</span>;\n        },\n        defaultPageSize: 10,\n        pageSizeOptions: [\"10\", \"20\", \"50\", \"100\"],\n        showSizeChanger: true,\n      }}\n    />\n  );\n}\n"],"sourceRoot":""}